<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mathematical Theory - The Calculus of Thrill</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
</head>
<body>
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <h1 class="site-title">The Calculus of Thrill</h1>
                    <p class="site-subtitle">Mathematical Analysis of Roller Coaster Physics</p>
                </div>
                <nav class="main-nav">
                    <ul class="nav-list">
                        <li><a href="../index.html" class="nav-link">Home</a></li>
                        <li><a href="simulation.html" class="nav-link">Simulation</a></li>
                        <li><a href="theory.html" class="nav-link active">Theory</a></li>
                        <li><a href="physics.html" class="nav-link">Physics</a></li>
                        <li><a href="design.html" class="nav-link">Design</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <section class="page-intro">
        <div class="container">
            <h2 class="page-title">Mathematical Theory</h2>
            <p class="page-description">The rigorous calculus framework governing the simulation: Piecewise derivatives, differential equations of motion, and integral calculus.</p>
        </div>
    </section>

    <section class="theory-content">
        <div class="container">
            
            <div class="theory-section">
                <h2>1. Track Function f(x): Piecewise Geometry</h2>
                <p class="section-intro"><strong>Definition:</strong> The scalar height field $f(x)$ constructed from four differentiable manifolds to ensure $C^1$ continuity.</p>

                <div class="piecewise-function">
                    <h3>The Four Track Segments (Corrected Coefficients):</h3>
                    <div class="piece">
                        <span class="condition">Segment 1 (Drop): $0 \le x < 5$</span>
                        <div class="equation">$$f_1(x) = 20 - 0.32 x^2$$</div>
                    </div>
                    <div class="piece">
                        <span class="condition">Segment 2 (Valley): $5 \le x < 15$</span>
                        <div class="equation">$$f_2(x) = 0.0064 (x - 10)^4 + 8.0$$</div>
                    </div>
                    <div class="piece">
                        <span class="condition">Segment 3 (Hill): $15 \le x < 25$</span>
                        <div class="equation">$$f_3(x) = 20 - 0.32 (x - 20)^2$$</div>
                    </div>
                    <div class="piece">
                        <span class="condition">Segment 4 (Ramp): $25 \le x \le 35$</span>
                        <div class="equation">$$f_4(x) = 0.32 (x - 30)^2 + 4.0$$</div>
                    </div>
                </div>

                <div class="purpose-box">
                    <h4>Mathematical Significance:</h4>
                    <ul>
                        <li><strong>Parabolic Segments ($x^2$):</strong> Used for constant second derivative (constant curvature approximation).</li>
                        <li><strong>Quartic Segment ($x^4$):</strong> Used in the high-G valley to minimize the "jerk" by flattening the bottom.</li>
                        <li><strong>Continuity:</strong> $f(5^-) = f(5^+) = 12$ and $f'(5^-) = f'(5^+) = -3.2$.</li>
                    </ul>
                </div>
            </div>

            <div class="theory-section">
                <h2>2. Velocity Field v(x): Energy Conservation</h2>
                <p class="section-intro"><strong>Derivation:</strong> Using the Conservation of Energy principle ($E_{total} = KE + PE$), we derive the velocity scalar field. Assuming initial push $v_0 = 0.5$ m/s, total energy head $H \approx 20.0127$ m.</p>
                
                

[Image of roller coaster potential and kinetic energy conversion diagram]


                <div class="master-equation">
                    <h3>Master Velocity Equation:</h3>
                    <div class="equation">$$ v(x) = \sqrt{2g(H - f(x))} $$</div>
                </div>

                <div class="piecewise-function">
                    <h3>Explicit Velocity Equations per Segment:</h3>
                    <div class="piece">
                        <span class="condition">Drop ($0 \le x < 5$):</span>
                        <div class="equation">$$v_1(x) = \sqrt{2 g\,(0.0127 + 0.32 x^2)}$$</div>
                    </div>
                    <div class="piece">
                        <span class="condition">Valley ($5 \le x < 15$):</span>
                        <div class="equation">$$v_2(x) = \sqrt{2 g\,\bigl(12.0127 - 0.0064 (x - 10)^4\bigr)}$$</div>
                    </div>
                    <div class="piece">
                        <span class="condition">Hill ($15 \le x < 25$):</span>
                        <div class="equation">$$v_3(x) = \sqrt{2 g\,\bigl(0.0127 + 0.32 (x - 20)^2\bigr)}$$</div>
                    </div>
                    <div class="piece">
                        <span class="condition">Ramp ($25 \le x \le 35$):</span>
                        <div class="equation">$$v_4(x) = \sqrt{2 g\,\bigl(16.0127 - 0.32 (x - 30)^2\bigr)}$$</div>
                    </div>
                </div>
            </div>

            <div class="theory-section highlight-section">
                <h2>3. The Differential Equation of Motion x(t)</h2>
                <p class="section-intro"><strong>The Problem:</strong> We know velocity as a function of position $v(x)$, but we need position as a function of time $x(t)$ for the simulation.</p>

                <div class="master-equation">
                    <h3>The Differential Equation:</h3>
                    <p>We project the tangential velocity onto the x-axis using the slope $f'(x)$:</p>
                    <div class="equation">
                        $$ \frac{dx}{dt} = v_x = \frac{v(x)}{\sqrt{1 + [f'(x)]^2}} $$
                    </div>
                    <p>Substituting our expressions:</p>
                    <div class="equation">
                        $$ \frac{dx}{dt} = \frac{\sqrt{2g(H - f(x))}}{\sqrt{1 + [f'(x)]^2}} $$
                    </div>
                </div>

                <div class="piecewise-function">
                    <h3>Expanded Form (The "Engine" of the Simulation):</h3>
                    <p>This is the exact system the code solves 60 times per second.</p>
                    <div class="equation">
                        $$
                        \frac{dx}{dt} =
                        \begin{cases}
                        \frac{\sqrt{2g (0.01 + 0.32 x^2)}}{\sqrt{1 + (-0.64 x)^2}}, & 0 \le x < 5 \\[10pt]
                        \frac{\sqrt{2g(12.0 - 0.0064 (x-10)^4)}}{\sqrt{1 + [0.0256 (x-10)^3]^2}}, & 5 \le x < 15 \\[10pt]
                        \frac{\sqrt{2g (0.01 + 0.32 (x-20)^2)}}{\sqrt{1 + [-0.64 (x-20)]^2}}, & 15 \le x < 25 \\[10pt]
                        \frac{\sqrt{2g(16.0 - 0.32 (x-30)^2)}}{\sqrt{1 + [0.64 (x-30)]^2}}, & 25 \le x \le 35
                        \end{cases}
                        $$
                    </div>
                </div>

                <div class="master-equation">
                    <h3>Numerical Integration (Euler's Method)</h3>
                    <p>Since the equation above has no closed-form integral, we approximate $x(t)$ iteratively:</p>
                    <div class="equation">
                        $$ x_{new} = x_{old} + \left( \frac{v(x_{old})}{\sqrt{1 + [f'(x_{old})]^2}} \right) \cdot \Delta t $$
                    </div>
                    <p>Where $\Delta t$ is the simulation time step (approx 0.016s).</p>
                </div>
            </div>

            <div class="theory-section">
                <h2>4. Integral Calculus: Time & Distance</h2>
                <p class="section-intro"><strong>Theoretical Check:</strong> Calculating the exact time and distance independent of the simulation loop.</p>

                <div class="master-equation">
                    <h3>The Time Integral</h3>
                    <p>Time is the integral of the reciprocal of velocity with respect to arc length.</p>
                    <div class="equation">
                        $$ dt = \frac{ds}{v} = \frac{\sqrt{1+[f'(x)]^2}}{\sqrt{2g(H-f(x))}} dx $$
                    </div>
                    <div class="equation">
                        $$ T_{total} = \int_{0}^{35} \frac{\sqrt{1 + [f'(x)]^2}}{\sqrt{2g(H - f(x))}} \, dx $$
                    </div>
                </div>

                <div class="master-equation">
                    <h3>The Arc Length Integral</h3>
                    <div class="equation">
                        $$ S = \int_{0}^{35} \sqrt{1 + [f'(x)]^2} \, dx $$
                    </div>
                    <p>This calculates the physical length of the steel track, not just the horizontal width.</p>
                </div>
            </div>

            <div class="theory-section">
                <h2>5. Projectile Motion ($x > 35$)</h2>
                <p class="section-intro">Once the cart leaves the ramp, it follows a parabolic trajectory determined by initial launch conditions.</p>

                <div class="master-equation">
                    <h3>Initial Launch Conditions</h3>
                    <p>At $x=35$, we calculate the launch vector components from the ramp's slope:</p>
                    <div class="equation">$$ v_{launch} = v(35) $$</div>
                    <div class="equation">$$ \theta = \arctan(f'(35)) = \arctan(3.2) \approx 72.6^\circ $$</div>
                    <div class="equation">$$ v_{x0} = v_{launch} \cos \theta, \quad v_{y0} = v_{launch} \sin \theta $$</div>
                </div>

                <div class="master-equation">
                    <h3>Parametric Equations of Flight</h3>
                    <div class="equation">$$ x(t) = x_0 + v_{x0}t $$</div>
                    <div class="equation">$$ y(t) = y_0 + v_{y0}t - \frac{1}{2}gt^2 $$</div>
                </div>

                <div class="master-equation">
                    <h3>Cartesian Trajectory $y(x)$</h3>
                    <p>Eliminating $t$ yields the path equation shown in the simulation panel:</p>
                    <div class="equation">
                        $$ y(x) = y_0 + \tan(\theta)(x-x_0) - \frac{g}{2v_{x0}^2}(x-x_0)^2 $$
                    </div>
                </div>
            </div>

        </div>
    </section>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-main">
                    <h3>The Calculus of Thrill</h3>
                    <p>Mathematical theory demonstrating the application of derivatives, curvature analysis, and continuity in roller coaster design.</p>
                </div>
                <div class="footer-links">
                    <div class="footer-section">
                        <h4>Project Sections</h4>
                        <ul>
                            <li><a href="../index.html">Project Home</a></li>
                            <li><a href="simulation.html">Interactive Simulation</a></li>
                            <li><a href="physics.html">Physics Model</a></li>
                            <li><a href="design.html">Track Design</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Team Roller Riders | DSC 1 Semester Project</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            if (typeof renderMathInElement !== 'undefined') {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: "$$", right: "$$", display: true},
                        {left: "$", right: "$", display: false}
                    ],
                    throwOnError: false
                });
            }
        });
    </script>
</body>
</html>